<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أكاديمية اسيوط - منصة التعلم الإلكتروني</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        overflow-x: hidden;
        background-color: #ffffff;
    }
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }
    /* Header */
    header {
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        color: white;
        padding: 1rem 0;
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
        transition: all 0.3s ease;
        box-shadow: 0 2px 15px rgba(0,0,0,0.1);
    }
    /* Logo Styling */
.logo {
    display: flex
;
    align-items: center;
    gap: 10px;
    width: 100px;
    height: 100px;
    border-radius: 50%;
}

.logo-image {
    height: 40px; /* Adjust size as needed */
    width: auto; /* Maintain aspect ratio */
    border-radius: 5px; /* Optional: for rounded corners */
    box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Optional: subtle shadow */
}

.logo-text {
    font-size: 1.5rem; /* Adjust size as needed */
    font-weight: bold;
    color: white; /* Text color */
    text-shadow: 0 2px 4px rgba(0,0,0,0.3); /* Optional: text shadow */
}


    nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .logo {
        font-size: 1.8rem;
        font-weight: 700;
        color: white;
        text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .nav-links {
        display: flex;
        list-style: none;
        gap: 2rem;
        text-align: center;
    }
    .nav-links a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        position: relative;
        padding: 5px 0;
        font-size: 1.1rem;
    }
    .nav-links a:hover {
        color: #ffffff;
        transform: translateY(-2px);
    }
    .nav-links a::after {
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: 0;
        left: 0;
        background: #ffffff;
        transition: width 0.3s ease;
    }
    .nav-links a:hover::after {
        width: 100%;
    }
    .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
    }
    /* Hero Section */
    .hero {
        background: linear-gradient(rgba(0, 0, 0, 0.9), rgba(247, 147, 30, 0.9)), url("./images/backraound.jpg") center center / cover no-repeat;
        color: #fff;
        padding: 180px 0 120px;
        text-align: center;
        position: relative;
        overflow: hidden;
    }
    .hero-content {
        position: relative;
        z-index: 2;
        max-width: 800px;
        margin: 0 auto;
    }
    .hero h1 {
        font-size: 3.5rem;
        margin-bottom: 1.5rem;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        animation: slideInUp 1s ease-out;
        font-weight: 800;
        line-height: 1.2;
    }
    .hero p {
        font-size: 1.3rem;
        margin-bottom: 2.5rem;
        opacity: 0.95;
        animation: slideInUp 1s ease-out 0.2s both;
        font-weight: 400;
    }
    .cta-button {
        display: inline-block;
        background: white;
        color: #ff6b35;
        padding: 15px 35px;
        text-decoration: none;
        border-radius: 50px;
        font-weight: 700;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        animation: slideInUp 1s ease-out 0.4s both;
        border: 2px solid white;
        cursor: pointer;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    .cta-button:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        background: transparent;
        color: white;
    }
    @keyframes slideInUp {
        from {
            opacity: 0;
            transform: translateY(50px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    /* Features Section */
    .features {
        padding: 100px 0;
        background: #f8f9fa;
    }
    .section-title {
        text-align: center;
        font-size: 2.5rem;
        margin-bottom: 3rem;
        color: #333;
        position: relative;
        font-weight: 700;
    }
    .section-title::after {
        content: '';
        width: 80px;
        height: 4px;
        background: linear-gradient(45deg, #ff6b35, #f7931e);
        position: absolute;
        bottom: -15px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 2px;
    }
    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2.5rem;
        margin-top: 4rem;
    }
    .feature-card {
        background: white;
        padding: 2.5rem 2rem;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
        height: 100%;
        display: flex;
        flex-direction: column;
        border: 1px solid #eaeaea;
    }
    .feature-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(45deg, #ff6b35, #f7931e);
        transform: translateX(-100%);
        transition: transform 0.4s ease;
    }
    .feature-card:hover::before {
        transform: translateX(0);
    }
    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    .feature-icon {
        font-size: 3.5rem;
        color: #ff6b35;
        margin-bottom: 1.5rem;
        animation: bounce 2s infinite;
    }
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
    }
    .feature-card h3 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        color: #333;
        font-weight: 700;
    }
    .feature-card p {
        color: #666;
        line-height: 1.7;
        flex-grow: 1;
        font-size: 1rem;
    }
    /* Courses Section */
    .courses {
        padding: 100px 0;
        background: white;
    }
    .courses-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2.5rem;
        margin-top: 3rem;
    }
    .course-card {
        background: #ffffff;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        transition: all 0.4s ease;
        border: 1px solid #eee;
    }
    .course-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    .course-image {
        height: 200px;
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 3.5rem;
    }
    .course-content {
        padding: 1.8rem;
    }
    .course-content h3 {
        font-size: 1.4rem;
        margin-bottom: 0.8rem;
        color: #333;
        font-weight: 700;
    }
    .course-content p {
        color: #666;
        margin-bottom: 1.2rem;
        font-size: 0.95rem;
        line-height: 1.6;
    }
    .course-meta {
        display: flex;
        justify-content: space-between;
        color: #777;
        font-size: 0.9rem;
        margin-bottom: 1.2rem;
        font-weight: 500;
    }
    .course-price {
        font-weight: 800;
        color: #ff6b35;
        font-size: 1.3rem;
    }
    /* Stats Section */
    .stats {
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        color: white;
        padding: 80px 0;
    }
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2.5rem;
        text-align: center;
    }
    .stat-item {
        padding: 1.5rem;
    }
    .stat-number {
        font-size: 3.5rem;
        font-weight: 800;
        display: block;
        margin-bottom: 0.5rem;
        color: white;
        line-height: 1;
    }
    .stat-label {
        font-size: 1.1rem;
        opacity: 0.95;
        font-weight: 500;
    }
    /* Testimonials */
    .testimonials {
        padding: 100px 0;
        background: #f8f9fa;
    }
    .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2.5rem;
        margin-top: 3rem;
    }
    .testimonial-card {
        background: white;
        padding: 2.5rem;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        position: relative;
        transition: all 0.4s ease;
        border: 1px solid #eee;
    }
    .testimonial-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    }
    .testimonial-card::before {
        content: '"';
        font-size: 5rem;
        color: #ff6b35;
        position: absolute;
        top: 10px;
        right: 20px;
        opacity: 0.1;
        font-family: Georgia, serif;
    }
    .testimonial-text {
        font-style: italic;
        margin-bottom: 1.5rem;
        color: #555;
        line-height: 1.7;
        font-size: 1.05rem;
    }
    .testimonial-author {
        font-weight: 700;
        color: #333;
        display: flex;
        align-items: center;
    }
    .author-avatar {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        margin-left: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 1.2rem;
    }
    .testimonial-role {
        color: #ff6b35;
        font-size: 0.95rem;
        font-weight: 500;
    }
    /* Contact Section */
    .contact {
        padding: 100px 0;
        background: white;
    }
    .contact-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 3rem;
        margin-top: 3rem;
    }
    .contact-info {
        display: flex;
        flex-direction: column;
        gap: 1.8rem;
    }
    .contact-item {
        display: flex;
        align-items: flex-start;
        gap: 1.2rem;
    }
    .contact-icon {
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        width: 55px;
        height: 55px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.3rem;
        flex-shrink: 0;
        box-shadow: 0 5px 15px rgba(255, 107, 53, 0.2);
    }
    .contact-text h4 {
        margin-bottom: 0.4rem;
        color: #333;
        font-size: 1.2rem;
        font-weight: 600;
    }
    .contact-text p, .contact-text a {
        color: #666;
        text-decoration: none;
        transition: color 0.3s ease;
        font-size: 1rem;
        line-height: 1.6;
    }
    .contact-text a:hover {
        color: #ff6b35;
    }
    .contact-form .form-group {
        margin-bottom: 1.8rem;
    }
    .contact-form input,
    .contact-form textarea {
        width: 100%;
        padding: 15px 18px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-family: inherit;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: #f9f9f9;
    }
    .contact-form input:focus,
    .contact-form textarea:focus {
        outline: none;
        border-color: #ff6b35;
        background: white;
        box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
    }
    .contact-form textarea {
        height: 160px;
        resize: vertical;
    }
    /* CTA Section */
    .cta-section {
        background: linear-gradient(rgba(0, 0, 0, 0.9), rgba(247, 147, 30, 0.9)), url("./images/backraound.jpg") center center / cover no-repeat;
        color: white;
        padding: 100px 0;
        text-align: center;
    }
    .cta-section h2 {
        font-size: 2.8rem;
        margin-bottom: 1.5rem;
        font-weight: 800;
    }
    .cta-section p {
        font-size: 1.3rem;
        margin-bottom: 2.5rem;
        opacity: 0.95;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
        font-weight: 400;
    }
    /* Footer */
    footer {
        background: #1a1a1a;
        color: white;
        padding: 60px 0 30px;
    }
    .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2.5rem;
        margin-bottom: 2.5rem;
    }
    .footer-section h3 {
        margin-bottom: 1.5rem;
        color: #ff6b35;
        font-size: 1.4rem;
        font-weight: 700;
    }
    .footer-section a {
        color: #bdc3c7;
        text-decoration: none;
        transition: color 0.3s ease;
        display: block;
        margin-bottom: 0.7rem;
        font-size: 1rem;
    }
    .footer-section a:hover {
        color: #ff6b35;
    }
    .social-links {
        display: flex;
        gap: 1.2rem;
        margin-top: 1.2rem;
    }
    .social-links a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 45px;
        height: 45px;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
        transition: all 0.3s ease;
        color: white;
        font-size: 1.1rem;
    }
    .social-links a:hover {
        background: #ff6b35;
        transform: translateY(-5px);
    }
    .footer-bottom {
        border-top: 1px solid #333;
        padding-top: 25px;
        text-align: center;
        color: #888;
        font-size: 0.95rem;
    }
    /* Animations */
    .animate-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.7s ease;
    }
    .animate-on-scroll.animated {
        opacity: 1;
        transform: translateY(0);
    }
/* ================= Mobile Responsive ================= */

/* Large Tablets & Small Laptops */
@media (max-width: 992px) {
    .hero h1 {
        font-size: 3rem;
    }
    .hero p {
        font-size: 1.2rem;
    }
    .section-title {
        font-size: 2.2rem;
    }
}

/* Tablets & Mobiles */
@media (max-width: 768px) {
    /* Navigation Menu */
    .nav-links {
        display: none;
        flex-direction: column;
        position: absolute;
        top: 135px; /* تحت الهيدر */
        right: 0;
        background: #000000a6;
        width: 260px;
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
        animation: slideDown 0.3s ease;
        z-index: 999;
    }

    .nav-links.active {
        display: flex;
    }

    .nav-links li {
        margin: 0.8rem 0;
    }

    .nav-links a {
        padding: 10px 0;
        color: #fff;
        font-size: 1.1rem;
        font-weight: 500;
        transition: color 0.3s ease;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                text-shadow: orange 5px 10px 10px;
    }

    .nav-links a:last-child {
        border-bottom: none;
    }

    .nav-links a:hover {
        color: #facc15; /* أصفر ذهبي عند hover */
    }

    .mobile-menu-btn {
        display: block;
    }

    /* Hero Section */
    .hero {
        padding: 180px 0 80px;
        text-align: center;
    }

    .hero h1 {
        font-size: 2.5rem;
    }

    .hero p {
        font-size: 1.1rem;
    }

    /* Grids -> تتحول عمود واحد */
    .features-grid,
    .courses-grid,
    .testimonials-grid,
    .contact-container {
        grid-template-columns: 1fr;
        gap: 2rem;
    }

    /* Sections */
    .section-title {
        font-size: 2rem;
    }

    .cta-section h2 {
        font-size: 2.2rem;
    }

    .cta-section p {
        font-size: 1.1rem;
    }

    .stat-number {
        font-size: 2.8rem;
    }
}

/* Small Mobiles */
@media (max-width: 480px) {
    .hero h1 {
        font-size: 2rem;
    }
    .hero p {
        font-size: 1rem;
    }
    .section-title {
        font-size: 1.8rem;
    }
    .stat-number {
        font-size: 2.5rem;
    }
    .stat-label {
        font-size: 1rem;
    }
    .cta-button {
        padding: 12px 25px;
        font-size: 1rem;
    }
    .feature-card, 
    .testimonial-card, 
    .course-content {
        padding: 1.2rem;
    }
}

/* Animation for dropdown */
@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Loading Animation */
    .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: opacity 0.5s ease;
    }
    .loading-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid rgba(255,255,255,0.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin {
        to { transform: rotate(360deg); }
    }
    /* Search Bar */
    .search-container {
        margin-top: 2.5rem;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }
    .search-bar {
        display: flex;
        border-radius: 50px;
        overflow: hidden;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }
    .search-bar input {
        flex: 1;
        padding: 16px 22px;
        border: none;
        font-size: 1rem;
        background: rgba(255,255,255,0.95);
    }
    .search-bar input:focus {
        outline: none;
        background: white;
    }
    .search-bar button {
        background: linear-gradient(45deg, #ff6b35, #f7931e);
        color: white;
        border: none;
        padding: 0 30px;
        cursor: pointer;
        font-weight: 700;
        transition: all 0.3s ease;
        font-size: 1rem;
    }
    .search-bar button:hover {
        background: linear-gradient(45deg, #e55a2b, #e0851a);
    }
    /* Data Loading Indicator */
    .data-loading-indicator {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        color: white;
        font-size: 1.5rem;
        display: none;
        flex-direction: column;
        gap: 20px;
    }
    .data-loading-indicator .loading-spinner {
        width: 50px;
        height: 50px;
    }
    /* Registration Modal */
    #registrationModal {
        background-color: rgba(0,0,0,0.6);
    }
    #registrationModal > div {
        background-color: white;
        border-radius: 15px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        border: none;
        max-width: 500px;
        width: 90%;
    }
    #registrationModal h2 {
        color: #ff6b35;
        text-align: center;
        margin-bottom: 1.5rem;
        font-weight: 700;
    }
    #registrationModal button[type="submit"] {
        background: linear-gradient(45deg, #ff6b35, #f7931e);
        color: white;
        border: none;
        padding: 15px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 700;
        width: 100%;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    #registrationModal button[type="submit"]:hover {
        background: linear-gradient(45deg, #e55a2b, #e0851a);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
    }
    #closeModal {
        color: #999;
        position: absolute;
        left: 20px;
        top: 20px;
        font-size: 2rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    #closeModal:hover {
        color: #ff6b35;
        transform: rotate(90deg);
    }
    /* Form Inputs */
    #registrationModal input,
    #registrationModal select {
        width: 100%;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-family: inherit;
        font-size: 1rem;
        margin-bottom: 1.2rem;
        transition: all 0.3s ease;
    }
    #registrationModal input:focus,
    #registrationModal select:focus {
        outline: none;
        border-color: #ff6b35;
        box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
    }
    #registrationModal label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: #555;
    }
    /* WhatsApp Success Message */
    #whatsappSuccess {
        background-color: #d4edda;
        color: #155724;
        padding: 15px;
        border-radius: 8px;
        text-align: center;
        font-weight: 500;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
</style>

</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Data Loading Indicator -->
    <div class="data-loading-indicator" id="dataLoadingIndicator">
        <div>جاري تحميل محتوى الصفحة...</div>
    </div>

    <!-- Header -->
    <header>
        <nav class="container">
            <div class="logo">
            <img class="logo" src="./logo2.jpg" alt="">
                <span id="logoText">أكاديمية اسيوط</span> <!-- Added ID for dynamic update -->
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="#home">الرئيسية</a></li>
                <li><a href="#features">المميزات</a></li>
                <li><a href="#courses">الدورات</a></li>
                <li><a href="#testimonials">آراء الطلاب</a></li>
                <li><a href="#contact">تواصل معنا</a></li>
            </ul>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
        </nav>
    </header>
    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <h1 id="heroTitle">مستقبل التعلم يبدأ هنا</h1>
                <p id="heroDescription">منصة تعليمية متطورة تقدم أفضل المحتوى التعليمي بأحدث التقنيات والأساليب التفاعلية</p>
                <a href="#courses" class="cta-button" id="heroCtaButton">ابدأ رحلتك التعليمية الآن</a>
                    <button class="cta-button" id="registerButton" style="    background: linear-gradient(45deg, #1cc961, #46ab12);
    margin-top: 15px;
    color: cornsilk;">سجل الآن مجاناً</button>

                <div class="search-container">
                    <div class="search-bar">
                        <input type="text" placeholder="ابحث عن دورة تدريبية...">
                        <button><i class="fas fa-search"></i> بحث</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2 class="section-title animate-on-scroll" id="featuresTitle">لماذا أكاديمية المستقبل؟</h2>
            <div class="features-grid" id="featuresGrid">
                <!-- Features will be populated dynamically -->
            </div>
        </div>
    </section>
    <!-- Courses Section -->
    <section class="courses" id="courses">
        <div class="container">
            <h2 class="section-title animate-on-scroll" id="coursesTitle">الدورات التدريبية</h2> <!-- Added id -->
            <div class="courses-grid" id="coursesGrid"> <!-- Added id -->
                <!-- Course cards will be populated dynamically -->
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-item animate-on-scroll">
                    <span class="stat-number" data-count="50000" id="studentsStat">0</span>
                    <span class="stat-label">طالب مسجل</span>
                </div>
                <div class="stat-item animate-on-scroll">
                    <span class="stat-number" data-count="200" id="coursesStat">0</span>
                    <span class="stat-label">دورة تدريبية</span>
                </div>
                <div class="stat-item animate-on-scroll">
                    <span class="stat-number" data-count="100" id="trainersStat">0</span>
                    <span class="stat-label">مدرب خبير</span>
                </div>
                <div class="stat-item animate-on-scroll">
                    <span class="stat-number" data-count="95" id="satisfactionStat">0</span>
                    <span class="stat-label">% نسبة الرضا</span>
                </div>
            </div>
        </div>
    </section>
    <!-- Testimonials Section -->
    <section class="testimonials" id="testimonials">
        <div class="container">
            <h2 class="section-title animate-on-scroll" id="testimonialsTitle">ماذا يقول طلابنا</h2> <!-- Added id -->
            <div class="testimonials-grid" id="testimonialsGrid"> <!-- Added id -->
                <!-- Testimonial cards will be populated dynamically -->
            </div>
        </div>
    </section>
    
    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="section-title animate-on-scroll">تواصل معنا</h2>
            <div class="contact-container">
                <div class="contact-info">
                    <div class="contact-item animate-on-scroll">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="contact-text">
                            <h4>العنوان</h4>
                            <p id="contactAddress">الرياض، المملكة العربية السعودية</p>
                        </div>
                    </div>
                    <div class="contact-item animate-on-scroll">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="contact-text">
                            <h4>رقم الهاتف</h4>
                             <p><a href="https://wa.me/201234567890" id="whatsappLink" target="_blank"><i class="fab fa-whatsapp"></i> <span id="contactPhone">+966 11 123 4567</span></a></p>
                        </div>
                    </div>
                    <div class="contact-item animate-on-scroll">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="contact-text">
                            <h4>البريد الإلكتروني</h4>
                            <p id="contactEmail">info@future-academy.com</p>
                        </div>
                    </div>
                    <div class="contact-item animate-on-scroll">
                        <div class="contact-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="contact-text">
                            <h4>ساعات العمل</h4>
                            <p>الأحد - الخميس: 8:00 صباحاً - 5:00 مساءً</p>
                        </div>
                    </div>
                </div>
                <div class="contact-form animate-on-scroll">
<form id="contactForm">
    <div class="form-group">
        <input type="text" id="contactName" placeholder="الاسم الكامل" required>
    </div>
    <div class="form-group">
        <input type="email" id="contactUserEmail" placeholder="البريد الإلكتروني" required>
    </div>
    <div class="form-group">
        <input type="text" id="contactSubject" placeholder="الموضوع">
    </div>
    <div class="form-group">
        <textarea id="contactMessage" placeholder="رسالتك" required></textarea>
    </div>
    <button type="submit" class="cta-button">إرسال الرسالة</button>
</form>
                </div>
            </div>
        </div>
    </section>
    
<!-- CTA Section -->
<section class="cta-section">
    <div class="container">
        <h2 class="animate-on-scroll">هل أنت مستعد لبدء رحلتك التعليمية؟</h2>
        <p class="animate-on-scroll">انضم لآلاف الطلاب الذين حققوا أهدافهم المهنية معنا</p>
        <!-- Changed link to button and added onclick to open modal -->
        <button type="button" class="cta-button animate-on-scroll" onclick="openRegistrationModal()">سجل الآن مجاناً</button>
    </div>
</section>

<!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>أكاديمية اسيوط</h3>
                    <p>منصة تعليمية متطورة تهدف لتقديم أفضل المحتوى التعليمي وتطوير المهارات المهنية.</p>
                    <div class="social-links">
                        <a href="https://www.facebook.com/AssiutAcademy5?rdid=DiHdyCcKyj7Avqc0&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F16euiERKZG%2F#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>روابط سريعة</h3>
                    <a href="#home">الرئيسية</a>
                    <a href="#features">المميزات</a>
                    <a href="#courses">الدورات</a>
                    <a href="#testimonials">آراء الطلاب</a>
                    <a href="#contact">تواصل معنا</a>
                </div>
                <div class="footer-section">
                    <h3>النشرة الإخبارية</h3>
                    <p>اشترك لتستلم آخر العروض والدورات التدريبية</p>
                    <div class="search-bar" style="margin-top: 15px;">
                        <input type="email" placeholder="بريدك الإلكتروني">
                        <button><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 أكاديمية اسيوط. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>
    <!-- Registration Modal -->
    <div id="registrationModal" style="display:none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);">
        <div style="background-color: #fff; margin: 5% auto; padding: 20px; border-radius: 10px; width: 90%; max-width: 500px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
            <span id="closeModal" style="color: #aaa; float: left; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
            <h2 style="text-align: center; margin-bottom: 20px;">تسجيل جديد</h2>
            <form id="registrationForm">
                <div style="margin-bottom: 15px;">
                    <label for="regName" style="display: block; margin-bottom: 5px;">الاسم الكامل:</label>
                    <input type="text" id="regName" required style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="regPhone" style="display: block; margin-bottom: 5px;">رقم الهاتف:</label>
                    <input type="tel" id="regPhone" required style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="regEmail" style="display: block; margin-bottom: 5px;">البريد الإلكتروني:</label>
                    <input type="email" id="regEmail" required style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="regCourse" style="display: block; margin-bottom: 5px;">الدورة المطلوبة:</label>
                    <select id="regCourse" required style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;">
                        <option value="">اختر دورة...</option>
                        <option value="تطوير الويب">تطوير الويب</option>
                        <option value="التصميم الجرافيكي">التصميم الجرافيكي</option>
                        <option value="التسويق الرقمي">التسويق الرقمي</option>
                        <option value="الذكاء الاصطناعي">الذكاء الاصطناعي</option>
                        <option value="تحليل البيانات">تحليل البيانات</option>
                    </select>
                </div>
                <button type="submit" style="width: 100%; padding: 12px; background: linear-gradient(45deg, #0cab29, #1ab52f); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">إرسال التسجيل</button>
            </form>
        </div>
    </div>

    <!-- WhatsApp Success Message -->
    <div id="whatsappSuccess" style="display:none; position: fixed; bottom: 20px; right: 20px; background-color: #d4edda; color: #155724; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 1002;">
        <i class="fas fa-check-circle"></i> سيتم فتح الواتساب لإرسال طلب التسجيل.
    </div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>



<script>
// Supabase Configuration - تأكد من مسح المسافات الزائدة
const SUPABASE_URL = "https://zefsmckaihzfiqqbdake.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InplZnNtY2thaWh6ZmlxcWJkYWtlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyMzUzNTgsImV4cCI6MjA2OTgxMTM1OH0.vktk2VkEPtMclb6jb_pFa1DbrqWX9SOZRsBR577o5mc";
let supabaseClient = null;
let fetchedCourseTitles = []; // Array to store course titles fetched from DB

// Initialize Supabase client
async function initializeSupabase() {
    try {
        if (typeof window.supabase !== 'undefined' && window.supabase.createClient) {
            console.log("Supabase library already loaded.");
            supabaseClient = window.supabase.createClient(SUPABASE_URL.trim(), SUPABASE_ANON_KEY.trim());
            console.log("Supabase client initialized successfully (already loaded).");
            return true;
        }

        console.log("Loading Supabase library dynamically...");
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2';
        script.async = true;

        const loadPromise = new Promise((resolve, reject) => {
            script.onload = function () {
                console.log("Supabase library loaded successfully.");
                if (typeof window.supabase !== 'undefined' && window.supabase.createClient) {
                    try {
                        supabaseClient = window.supabase.createClient(SUPABASE_URL.trim(), SUPABASE_ANON_KEY.trim());
                        console.log("Supabase client initialized successfully (after dynamic load).");
                        resolve(true);
                    } catch (initError) {
                        console.error("Error initializing Supabase client (after dynamic load):", initError);
                        reject(initError);
                    }
                } else {
                    const errorMsg = "Supabase library loaded but 'supabase.createClient' is not available.";
                    console.error(errorMsg);
                    reject(new Error(errorMsg));
                }
            };
            script.onerror = function (err) {
                const errorMsg = "Failed to load Supabase library from CDN.";
                console.error(errorMsg, err);
                reject(new Error(errorMsg));
            };
        });

        document.head.appendChild(script);
        return await loadPromise;
    } catch (error) {
        console.error("Error initializing Supabase:", error);
        return false;
    }
}

// Fetch content from Supabase
async function fetchContentFromDB() {
    const dataLoadingIndicator = document.getElementById('dataLoadingIndicator');
    if (dataLoadingIndicator) {
        dataLoadingIndicator.style.display = 'flex';
    }

    try {
        if (!supabaseClient) {
            console.log("Initializing Supabase client...");
            const initialized = await initializeSupabase();
            if (!initialized) {
                throw new Error('Failed to initialize Supabase client after loading.');
            }
        }

        console.log("Fetching data from Supabase...");
        const { data, error } = await supabaseClient
            .from('landing_content')
            .select('content_data')
            .eq('id', 1)
            .single();

        if (error) {
            console.error("Supabase fetch error:", error);
            throw error;
        }

        if (data && data.content_data) {
            console.log("Data fetched from DB:", data.content_data);
            updatePageContent(data.content_data);
        } else {
            console.warn("No data found in the database for ID 1, using default content.");
        }
    } catch (error) {
        console.error("Error fetching content from database:", error);
        alert("حدث خطأ أثناء تحميل المحتوى. سيتم عرض المحتوى الافتراضي.");
    } finally {
        if (dataLoadingIndicator) {
            dataLoadingIndicator.style.display = 'none';
        }
        const loadingOverlay = document.getElementById('loadingOverlay');
        if (loadingOverlay && loadingOverlay.style.display !== 'none') {
            setTimeout(() => {
                loadingOverlay.style.opacity = '0';
                setTimeout(() => {
                    loadingOverlay.style.display = 'none';
                }, 500);
            }, 500);
        }
    }
}

// Update page content with data from the database
function updatePageContent(contentData) {
    try {
        // دالة مساعدة لتحديث النص بأمان
        function safeSetText(elementId, text) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = text;
            } else {
                console.warn(`Element with ID '${elementId}' not found.`);
            }
        }

        // Update Hero Section
        if (contentData.hero) {
            safeSetText('heroTitle', contentData.hero.title || 'مستقبل التعلم يبدأ هنا');
            safeSetText('heroDescription', contentData.hero.description || 'منصة تعليمية متطورة تقدم أفضل المحتوى التعليمي بأحدث التقنيات والأساليب التفاعلية');
            safeSetText('heroCtaButton', contentData.hero.buttonText || 'ابدأ رحلتك التعليمية الآن');
        }

        // Update Features Section Title
        if (contentData.features && contentData.features.title) {
            safeSetText('featuresTitle', contentData.features.title);
        }

        // Update Features Grid (Dynamic)
        if (contentData.features && contentData.features.items && Array.isArray(contentData.features.items)) {
            const featuresGrid = document.getElementById('featuresGrid');
            if(featuresGrid) { // تحقق من وجود العنصر
                featuresGrid.innerHTML = '';
                contentData.features.items.forEach(feature => {
                    const featureCard = document.createElement('div');
                    featureCard.className = 'feature-card animate-on-scroll';
                    featureCard.innerHTML = `
                        <div class="feature-icon">
                            <i class="${feature.icon}"></i>
                            </div>
                            <h3>${feature.title}</h3>
                            <p>${feature.description}</p>
                        `;
                        featuresGrid.appendChild(featureCard);
                    });
                    document.querySelectorAll('.feature-card').forEach(el => {
                        observer.observe(el);
                    });
                }
            }

            // Update Stats Section
            if (contentData.stats) {
                const map = {
                    students: 'studentsStat',
                    courses: 'coursesStat',
                    trainers: 'trainersStat',
                    satisfaction: 'satisfactionStat'
                };
                Object.entries(map).forEach(([key, id]) => {
                    if (contentData.stats[key] !== undefined) {
                        const el = document.getElementById(id);
                        if (el) {
                            el.setAttribute('data-count', contentData.stats[key]);
                            el.textContent = key === 'satisfaction' ? `${contentData.stats[key]}%` : parseInt(contentData.stats[key]).toLocaleString();
                        }
                    }
                });
            }

            // Update Courses Section Title (تأكد من وجود العنصر)
            if (contentData.courses && contentData.courses.title) {
                 safeSetText('coursesTitle', contentData.courses.title);
            }

            // Update Courses Grid (Dynamic) - تبقى كما هي في الصفحة
            // Also, populate the course titles array for the modal dropdown
            fetchedCourseTitles = []; // Clear previous titles
            if (contentData.courses && contentData.courses.items && Array.isArray(contentData.courses.items)) {
                const coursesGrid = document.getElementById('coursesGrid');
                if(coursesGrid) {
                    coursesGrid.innerHTML = '';
// Inside the forEach loop for courses
contentData.courses.items.forEach(course => {
    const courseTitle = course.title;
    fetchedCourseTitles.push(courseTitle);
    const courseCard = document.createElement('div');
    courseCard.className = 'course-card animate-on-scroll';
    // Note: Using template literals and escaping backticks if needed,
    // or better, build the elements programmatically to avoid HTML injection risks.
    // For simplicity here, we use innerHTML but be cautious with user data.
    courseCard.innerHTML = `
        <div class="course-image">
            <i class="${course.icon}"></i>
        </div>
        <div class="course-content">
            <h3>${courseTitle}</h3>
            <p>${course.description}</p>
            <div class="course-meta">
                <span><i class="far fa-clock"></i> ${course.duration}</span>
                <span><i class="fas fa-user-graduate"></i> ${course.students}</span>
            </div>
            <div class="course-price">${course.price}</div>
            <!-- زر سجل الآن لكل دورة -->
            <button type="button" class="cta-button register-course-btn" style="margin-top: 15px; width:100%;" data-course-title="${courseTitle}">سجل الآن</button>
        </div>
    `;
    coursesGrid.appendChild(courseCard);
});
                    document.querySelectorAll('.course-card').forEach(el => {
                        observer.observe(el);
                    });
                    // After updating courses, populate the modal dropdown if it exists
                    populateCourseDropdown();
                }
            }

            // Update Testimonials Section Title (تأكد من وجود العنصر)
            if (contentData.testimonials && contentData.testimonials.title) {
                safeSetText('testimonialsTitle', contentData.testimonials.title);
            }

            // Update Testimonials Grid (Dynamic) - تبقى كما هي في الصفحة
            if (contentData.testimonials && contentData.testimonials.items && Array.isArray(contentData.testimonials.items)) {
                const testimonialsGrid = document.getElementById('testimonialsGrid');
                 if(testimonialsGrid) {
                    testimonialsGrid.innerHTML = '';
                    contentData.testimonials.items.forEach(testimonial => {
                        const testimonialCard = document.createElement('div');
                        testimonialCard.className = 'testimonial-card animate-on-scroll';
                        testimonialCard.innerHTML = `
                            <p class="testimonial-text">${testimonial.text}</p>
                            <div class="testimonial-author">
                                <div class="author-avatar">${testimonial.avatar}</div>
                                <div>
                                    <div>${testimonial.author}</div>
                                    <div class="testimonial-role">${testimonial.role}</div>
                                </div>
                            </div>
                        `;
                        testimonialsGrid.appendChild(testimonialCard);
                    });
                    document.querySelectorAll('.testimonial-card').forEach(el => {
                        observer.observe(el);
                    });
                 }
            }

            // Update Contact Section
            if (contentData.contact) {
                if (contentData.contact.address) safeSetText('contactAddress', contentData.contact.address);
                if (contentData.contact.phone) safeSetText('contactPhone', contentData.contact.phone);
                if (contentData.contact.email) safeSetText('contactEmail', contentData.contact.email);
            }

        console.log("Page content updated successfully from database");
    } catch (error) {
        console.error("Error updating page content:", error);
    }
}

// Function to populate the course dropdown in the modal
function populateCourseDropdown() {
    const courseSelect = document.getElementById('regCourse');
    if (courseSelect && fetchedCourseTitles.length > 0) {
        // Clear existing options except the first one (placeholder)
        courseSelect.innerHTML = '<option value="">اختر دورة...</option>';
        // Add fetched course titles as options
        fetchedCourseTitles.forEach(title => {
            const option = document.createElement('option');
            option.value = title;
            option.textContent = title;
            courseSelect.appendChild(option);
        });
    }
}


// دالة لفتح نافذة التسجيل
function openRegistrationModal() {
    const modal = document.getElementById("registrationModal");
    if (modal) {
        modal.style.display = "block";
        // منع التمرير في الخلفية
        document.body.style.overflow = 'hidden';
    }
}

// دالة لإغلاق نافذة التسجيل
function closeRegistrationModal() {
    const modal = document.getElementById("registrationModal");
    if (modal) {
        modal.style.display = "none";
        // السماح بالتمرير مرة أخرى
        document.body.style.overflow = '';
    }
}

// دالة لمعالجة إرسال نموذج التسجيل (مثال بسيط)
function handleRegistrationFormSubmit(event) {
    event.preventDefault();
    const name = document.getElementById('regName').value;
    const phone = document.getElementById('regPhone').value;
    const email = document.getElementById('regEmail').value;
    const course = document.getElementById('regCourse').value;

    if (name && phone && email && course) {
         // إغلاق المودال
        closeRegistrationModal();

        // عرض رسالة نجاح مؤقتة
        const successMsg = document.getElementById('whatsappSuccess');
        if (successMsg) {
             successMsg.style.display = 'block';
             setTimeout(() => {
                 successMsg.style.display = 'none';
             }, 3000); // إخفاء الرسالة بعد 3 ثواني
        }

        // إنشاء رابط WhatsApp مع البيانات
        // استبدل YOUR_PHONE_NUMBER بـ 201234567890 كما في HTML
        const message = `مرحبًا، أرغب في التسجيل في دورة ${course}.%0Aالاسم: ${name}%0Aرقم الهاتف: ${phone}%0Aالبريد الإلكتروني: ${email}`;
        const whatsappUrl = `https://wa.me/201234567890?text=${message}`;

        // فتح رابط WhatsApp في علامة تبويب جديدة
        window.open(whatsappUrl, '_blank');

        // إعادة تعيين النموذج
        event.target.reset();
    } else {
        alert('يرجى ملء جميع الحقول المطلوبة.');
    }
}

// --- Original Script Code (unchanged) ---
const mobileMenuBtn = document.getElementById('mobileMenuBtn');
const navLinks = document.getElementById('navLinks');
mobileMenuBtn.addEventListener('click', () => {
    navLinks.classList.toggle('active');
});
document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', () => {
        navLinks.classList.remove('active');
    });
});
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    });
});
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
};
const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('animated');
        }
    });
}, observerOptions);
document.querySelectorAll('.animate-on-scroll').forEach(el => {
    observer.observe(el);
});
function animateCounter(element) {
    const target = parseInt(element.getAttribute('data-count'));
    if (isNaN(target)) return;
    const duration = 2000;
    const step = target / duration * 16;
    let current = 0;
    const timer = setInterval(() => {
        current += step;
        if (current >= target) {
            element.textContent = target.toLocaleString();
            clearInterval(timer);
        } else {
            element.textContent = Math.floor(current).toLocaleString();
        }
    }, 16);
}
const statsSection = document.querySelector('.stats');
const statsObserver = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            document.querySelectorAll('.stat-number').forEach(counter => {
                if (counter.getAttribute('data-count')) {
                    animateCounter(counter);
                }
            });
            statsObserver.unobserve(entry.target);
        }
    });
}, { threshold: 0.5 });
statsObserver.observe(statsSection);
window.addEventListener('scroll', function() {
    const header = document.querySelector('header');
    if (window.scrollY > 100) {
        header.style.background = 'linear-gradient(135deg, #ff6b35 0%, #f7931e';
        header.style.boxShadow = '0 2px 20px rgba(0,0,0,0.1)';
    } else {
        header.style.background = 'linear-gradient(135deg, #ff6b35 0%, #f7931e';
        header.style.boxShadow = 'none';
    }
});
window.addEventListener('scroll', function() {
    const hero = document.querySelector('.hero');
    const scrolled = window.pageYOffset;
    const rate = scrolled * -0.5;
    hero.style.backgroundPosition = `center ${rate}px`;
});
const contactForm = document.getElementById('contactForm');
if (contactForm) {
    contactForm.addEventListener('submit', function(e) {
        e.preventDefault();
        alert('شكراً لك على رسالتك! سيتم التواصل معك قريباً.');
        contactForm.reset();
    });
}

// Initialize and fetch content when the page loads
document.addEventListener('DOMContentLoaded', function() {
    console.log("DOM fully loaded and parsed. Initializing Supabase and fetching content...");

    // إضافة مستمع لزر التسجيل في Hero
    const heroRegisterBtn = document.getElementById("registerButton");
    if (heroRegisterBtn) {
        heroRegisterBtn.addEventListener("click", openRegistrationModal);
    }

    // إضافة مستمع لإغلاق المودال
    const closeModalBtn = document.getElementById("closeModal");
    if (closeModalBtn) {
        closeModalBtn.addEventListener("click", closeRegistrationModal);
    }

    // إضافة مستمع للنقر خارج المودال لإغلاقه
    const modal = document.getElementById("registrationModal");
    if (modal) {
        window.addEventListener("click", function (event) {
            if (event.target === modal) {
                closeRegistrationModal();
            }
        });
    }

    // إضافة مستمع لإرسال نموذج التسجيل
    const registrationForm = document.getElementById('registrationForm');
    if (registrationForm) {
        registrationForm.addEventListener('submit', handleRegistrationFormSubmit);
    }

    // بدء جلب المحتوى
    fetchContentFromDB();
});

// ... (الكود السابق داخل DOMContentLoaded) ...

// إضافة مستمع لإرسال نموذج التسجيل
const registrationForm = document.getElementById('registrationForm');
if (registrationForm) {
    registrationForm.addEventListener('submit', handleRegistrationFormSubmit);
}

// مستمع للأحداث المفوض لجميع أزرار "سجل الآن" في بطاقات الدورات
document.addEventListener('click', function(event) {
    // التحقق مما إذا كان العنصر المُنقر هو زر "سجل الآن" للدورة
    if (event.target && event.target.matches('.register-course-btn')) {
        const courseTitle = event.target.getAttribute('data-course-title');
        if (courseTitle) {
            // فتح المودال
            openRegistrationModal();

            // تحديد الدورة في القائمة المنسدلة بعد فتح المودال
            // نستخدم setTimeout قصير للتأكد من أن المودال قد أصبح مرئيًا
            // وبالتالي القائمة المنسدلة قد تكون قد تمت تهيئتها
            setTimeout(() => {
                const courseSelect = document.getElementById('regCourse');
                if (courseSelect) {
                    // البحث عن الخيار الذي قيمته تساوي عنوان الدورة
                    const optionToSelect = courseSelect.querySelector(`option[value="${courseTitle}"]`);
                    if (optionToSelect) {
                        // تعيين قيمة القائمة المنسدلة لعنوان الدورة
                        courseSelect.value = courseTitle;
                    } else {
                        // إذا لم يتم العثور على الخيار (رغم أنه يجب أن يكون موجودًا)
                        // يمكن تعيين القائمة المنسدلة إلى القيمة الافتراضية أو عرض رسالة
                        console.warn(`Course option '${courseTitle}' not found in dropdown.`);
                    }
                }
            }, 10); // تأخير قصير جداً
        }
    }
});

// بدء جلب المحتوى
fetchContentFromDB();

</script>
</body>
</html>